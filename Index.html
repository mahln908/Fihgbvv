<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabor de Casa - Receitas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: #333;
            padding-top: 130px;
        }
        
        /* Cabe√ßalho fixo compacto */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(to right, #ff6b6b, #ff8e53);
            color: white;
            padding: 8px 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo {
            font-size: 1.8rem;
            margin-right: 10px;
            animation: fumaca 3s infinite;
        }
        
        @keyframes fumaca {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-3px) rotate(2deg); }
        }
        
        .logo-text {
            font-size: 1.6rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        /* Barra de pesquisa compacta */
        .search-container {
            position: fixed;
            top: 55px;
            left: 0;
            width: 100%;
            background-color: white;
            padding: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 999;
        }
        
        .search-box {
            display: flex;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .search-box input {
            flex: 1;
            padding: 8px 12px;
            border: 2px solid #ff6b6b;
            border-radius: 20px 0 0 20px;
            font-size: 0.9rem;
            outline: none;
        }
        
        .search-box button {
            padding: 8px 15px;
            background-color: #ff6b6b;
            color: white;
            border: none;
            border-radius: 0 20px 20px 0;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        
        .search-box button:hover {
            background-color: #e55c5c;
        }
        
        /* Categorias compactas */
        .categories-container {
            position: fixed;
            top: 95px;
            left: 0;
            width: 100%;
            background-color: white;
            padding: 8px 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 998;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .categories {
            display: inline-flex;
            gap: 10px;
            padding: 3px 0;
        }
        
        .category {
            background-color: #f2f2f2;
            padding: 6px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.8rem;
        }
        
        .category:hover, .category.active {
            background-color: #ff6b6b;
            color: white;
        }
        
        /* Conte√∫do principal */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
        }
        
        .recipes {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .recipe-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        
        .recipe-card:hover {
            transform: translateY(-3px);
        }
        
        .recipe-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        
        .recipe-content {
            padding: 15px;
        }
        
        .recipe-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #333;
        }
        
        .recipe-desc {
            color: #666;
            margin-bottom: 12px;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .recipe-meta {
            display: flex;
            justify-content: space-between;
            color: #888;
            font-size: 0.8rem;
        }
        
        .loading {
            text-align: center;
            padding: 30px;
            font-size: 1.1rem;
            color: #ff6b6b;
        }
        
        .error {
            text-align: center;
            padding: 30px;
            font-size: 1.1rem;
            color: #ff6b6b;
            background-color: #ffeeee;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            body {
                padding-top: 145px;
            }
            
            .categories-container {
                top: 105px;
            }
            
            .logo-text {
                font-size: 1.4rem;
            }
            
            .logo {
                font-size: 1.6rem;
            }
            
            .recipes {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding-top: 155px;
            }
            
            .categories-container {
                top: 115px;
            }
            
            .logo-text {
                font-size: 1.3rem;
            }
            
            .search-box input {
                font-size: 0.8rem;
            }
            
            .search-box button {
                font-size: 0.8rem;
                padding: 8px 12px;
            }
            
            .recipes {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <div class="logo">üç≥</div>
            <div class="logo-text">Sabor de Casa</div>
        </div>
    </header>
    
    <div class="search-container">
        <div class="search-box">
            <input type="text" id="search-input" placeholder="Encontre sua receita favorita...">
            <button id="search-button"><i class="fas fa-search"></i> Pesquisar</button>
        </div>
    </div>
    
    <div class="categories-container">
        <div class="categories" id="categories-list">
            <div class="category active" data-category="Todas">Todas</div>
            <div class="category" data-category="Bolos">Bolos</div>
            <div class="category" data-category="Sobremesas">Sobremesas</div>
            <div class="category" data-category="Massas">Massas</div>
            <div class="category" data-category="Carnes">Carnes</div>
            <div class="category" data-category="Aves">Aves</div>
            <div class="category" data-category="Peixes">Peixes</div>
            <div class="category" data-category="Saladas">Saladas</div>
            <div class="category" data-category="Sopas">Sopas</div>
            <div class="category" data-category="Vegetarianas">Vegetarianas</div>
            <div class="category" data-category="Low Carb">Low Carb</div>
            <div class="category" data-category="Bebidas">Bebidas</div>
        </div>
    </div>
    
    <div class="container">
        <div class="recipes" id="recipes-container">
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i> Carregando receitas...
            </div>
        </div>
    </div>

    <script>
        // ID da sua planilha do Google Sheets
        const SHEET_ID = '14dMXRPrTP6SCldqhprh2wulLtZJZSL3XQpawWISATVc';
        
        // Dados de exemplo para demonstra√ß√£o
        const sampleData = [
            {
                nome: "Bolo de Chocolate",
                categoria: "Bolos",
                tempo: "45 min",
                ingrediente: "Farinha, a√ß√∫car, chocolate em p√≥, ovos, leite, √≥leo, fermento",
                mododepreparo: "1. Misture os ingredientes secos. 2. Adicione os l√≠quidos. 3. Asse por 30 minutos.",
                porcoes: "8 por√ß√µes",
                url: "https://images.unsplash.com/photo-1578985545062-69928b1d9587?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1089&q=80"
            },
            {
                nome: "Lasanha √† Bolonhesa",
                categoria: "Massas",
                tempo: "1h 30min",
                ingrediente: "Massa para lasanha, carne mo√≠da, molho de tomate, queijo mussarela, queijo parmes√£o",
                mododepreparo: "1. Prepare o molho bolonhesa. 2. Monte as camadas de massa, molho e queijo. 3. Asse por 40 minutos.",
                porcoes: "6 por√ß√µes",
                url: "https://images.unsplash.com/photo-1574894709920-11b28e7367e3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1035&q=80"
            }
        ];
        
        // Fun√ß√£o para carregar receitas do Google Sheets
        async function loadRecipesFromSheets() {
            try {
                // Tenta acessar a planilha via API (m√©todo mais confi√°vel)
                const API_URL = `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/P√°gina1?key=AIzaSyC_8CHxOvjcNCs36B-Omt3v5VjzVAazdIw`;
                
                const response = await fetch(API_URL);
                if (!response.ok) {
                    throw new Error('Erro ao carregar dados via API');
                }
                
                const data = await response.json();
                
                // Processa os dados da API
                const recipes = parseSheetData(data.values);
                processRecipesData(recipes);
                
            } catch (error) {
                console.error('Erro ao carregar dados do Google Sheets:', error);
                
                // Tenta m√©todo alternativo (exporta√ß√£o CSV)
                try {
                    const CSV_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv`;
                    
                    const csvResponse = await fetch(CSV_URL);
                    if (!csvResponse.ok) {
                        throw new Error('Erro ao carregar dados CSV');
                    }
                    
                    const csvData = await csvResponse.text();
                    const recipes = parseCSVData(csvData);
                    processRecipesData(recipes);
                    
                } catch (csvError) {
                    console.error('Erro ao carregar dados CSV:', csvError);
                    showError('Erro ao carregar receitas. Verifique se a planilha est√° publicada.');
                    
                    // Usa dados de exemplo em caso de erro
                    processRecipesData(sampleData);
                }
            }
        }
        
        // Fun√ß√£o para processar dados da planilha
        function parseSheetData(values) {
            if (!values || values.length < 2) return [];
            
            const headers = values[0];
            const recipes = [];
            
            for (let i = 1; i < values.length; i++) {
                const row = values[i];
                if (row.length === 0) continue;
                
                const recipe = {};
                
                // Mapeia os dados baseado nos cabe√ßalhos
                for (let j = 0; j < headers.length; j++) {
                    if (j < row.length) {
                        recipe[headers[j]] = row[j];
                    } else {
                        recipe[headers[j]] = "";
                    }
                }
                
                recipes.push(recipe);
            }
            
            return recipes;
        }
        
        // Fun√ß√£o para processar dados CSV
        function parseCSVData(csv) {
            const recipes = [];
            const lines = csv.split('\n');
            const headers = lines[0].split(',').map(header => header.trim());
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i];
                if (!line.trim()) continue;
                
                const values = line.split(',').map(value => value.trim());
                const recipe = {};
                
                for (let j = 0; j < headers.length; j++) {
                    recipe[headers[j]] = values[j] || "";
                }
                
                recipes.push(recipe);
            }
            
            return recipes;
        }
        
        // Processa os dados das receitas
        function processRecipesData(recipes) {
            // Salva os dados em cache
            window.allRecipes = recipes;
            
            // Renderiza as receitas
            renderRecipes(recipes);
            
            // Configura os eventos de clique nas categorias
            setupCategoryFilter();
        }
        
        // Fun√ß√£o para renderizar as receitas
        function renderRecipes(recipes) {
            const container = document.getElementById('recipes-container');
            container.innerHTML = '';
            
            if (recipes.length === 0) {
                container.innerHTML = '<div class="loading">Nenhuma receita encontrada</div>';
                return;
            }
            
            recipes.forEach(recipe => {
                const recipeCard = document.createElement('a');
                recipeCard.className = 'recipe-card';
                recipeCard.href = `receita.html?nome=${encodeURIComponent(recipe.nome)}`;
                recipeCard.target = "_blank";
                
                recipeCard.innerHTML = `
                    <img src="${recipe.url || 'https://images.unsplash.com/photo-1547592180-85f173990554?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80'}" 
                         alt="${recipe.nome || 'Receita'}" class="recipe-image">
                    <div class="recipe-content">
                        <h3 class="recipe-title">${recipe.nome || 'Nome n√£o dispon√≠vel'}</h3>
                        <p class="recipe-desc">${recipe.ingrediente ? recipe.ingrediente.substring(0, 100) + '...' : 'Descri√ß√£o n√£o dispon√≠vel'}</p>
                        <div class="recipe-meta">
                            <span><i class="far fa-clock"></i> ${recipe.tempo || 'N/A'}</span>
                            <span><i class="fas fa-tag"></i> ${recipe.categoria || 'Geral'}</span>
                        </div>
                    </div>
                `;
                
                container.appendChild(recipeCard);
            });
        }
        
        // Fun√ß√£o para configurar o filtro por categoria
        function setupCategoryFilter() {
            document.querySelectorAll('.category').forEach(category => {
                category.addEventListener('click', function() {
                    document.querySelector('.category.active').classList.remove('active');
                    this.classList.add('active');
                    
                    const selectedCategory = this.getAttribute('data-category');
                    
                    if (selectedCategory === 'Todas') {
                        renderRecipes(window.allRecipes);
                    } else {
                        const filteredRecipes = window.allRecipes.filter(recipe => 
                            recipe.categoria && recipe.categoria.toLowerCase() === selectedCategory.toLowerCase()
                        );
                        renderRecipes(filteredRecipes);
                    }
                });
            });
        }
        
        // Fun√ß√£o para mostrar erro
        function showError(message) {
            const container = document.getElementById('recipes-container');
            container.innerHTML = `<div class="error">${message}</div>`;
        }
        
        // Inicializa o site
        document.addEventListener('DOMContentLoaded', function() {
            // Carrega as receitas do Google Sheets
            loadRecipesFromSheets();
            
            // Adiciona funcionalidade de pesquisa
            document.getElementById('search-button').addEventListener('click', function() {
                const searchTerm = document.getElementById('search-input').value.toLowerCase();
                
                if (!window.allRecipes) return;
                
                const filteredRecipes = window.allRecipes.filter(recipe => 
                    (recipe.nome && recipe.nome.toLowerCase().includes(searchTerm)) || 
                    (recipe.ingrediente && recipe.ingrediente.toLowerCase().includes(searchTerm)) ||
                    (recipe.categoria && recipe.categoria.toLowerCase().includes(searchTerm))
                );
                
                renderRecipes(filteredRecipes);
            });
            
            // Pesquisa ao pressionar Enter
            document.getElementById('search-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    document.getElementById('search-button').click();
                }
            });
        });
    </script>
</body>
</html>
